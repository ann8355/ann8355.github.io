webpackJsonp([1],{GydF:function(t,e){t.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA4BAMAAAC4dD1UAAAAG1BMVEU3Nzf////m5ubNzc2bm5u0tLSCgoJpaWlQUFCD5UHjAAACWUlEQVQ4y81VTVfaUBAdCyVZOi8BumworS5NAxyXIGBdEoTaZZBStqE9eFzGfmh/tu9jnpMEce09B0LevZm5M5P3gDKc8wxewnaBreQFvoYS9f0x3AAV2nsFMRp4s9ntc/yZ5D4EJOrt8r8Q/RQ2SNhxci0XG8CCtORPxh9jPSfoF/h75a+FHsDCCt4DY9hq3lzSY1ogQsQm8xX0DgFCxSQwUBffifETC0K8lPGi7mw0SmE1jz7jMTjB9sjyPxHxpDixRDc1yfVvwuW495G0UpWL71ggV87Vk7Mr0B5BWzklwUCb6zys2gEKR8/CjPUwFyF1Q7ngTHGEOvYm34lANb6ijbg41I9Ki2ysppPe6e6/pSb+xo8scIVKGmprB0ZwEuanoThfZfDtIHSeBfdBGmoMTNn4BE9+gHAgOR0YHM016M0TPCuDBK7R1DDFKOryO0XWEQC7s/V2RKnJA0UQnXEKRXAVFby6zXb3oLfos0nTt2XUnc/nX81qVQSToiBxqEAzvphn8cYURVdsmOmo4RWq8HUbuR0BCypmQK7dMLRgBJyi/+epfxv6RQLaCTaADxCSW2sy1tYeaLlPntiD2SpH4uL/aozYURGF0TbzHoaSy8DpAVTRwrdNtQv11AZc6lsfOAf5TuicCPXdN+Ac+ZjbqbQoUKTlw03t52qPCheBtcg52hn81d/gfuf9zNPwNE9W/yGWD1BxCkvqoFLceYbiN3/iSG+siP3iGS0utuTUZKvhMRRwE2MOYuKWX9JBnu7l2HKvROfHOtv7RyG6a9iLM9H5ksHrxCNuI3fYCRJQmwAAAABJRU5ErkJggg=="},J7QH:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o=n("NYxO"),i=n("QDpQ"),r=n.n(i),s=n("rifk"),c=n.n(s),l=n("TXmL"),m=n("mtWM"),u=n.n(m),f={"zh-TW":{common:{take_num:"叫號取單",write_off:"核銷號碼",take:"取號",take_title:"取號號碼",off:"報到",current_waiting:"等候組數",order_number:"號碼",confirm_title:"等候確認",confirm:"確認",cancel:"取消",total:"人數",name:"稱呼",phone:"電話",networkError:"網路不穩定？",refresh:"刷新",gender:"性别",male:"男性",female:"女性",off_title:"核銷",detail_title:"詳細資訊",number:"號碼",close:"關閉",dataError:"資料送出錯誤",no_data:"暫無候位",setting:"設定",create_batch:"建新批次",reset_batch:"重設批次",order_people:"人數"}},"en-US":{common:{take_num:"Call order",write_off:"Write-off number",take:"Take number",take_title:"Number",off:"Write off",current_waiting:"Groups in line",order_number:"Waiting number",confirm_title:"Awaiting confirmation",confirm:"Confirm",cancel:"Cancel",total:"Total",name:"Name",phone:"Telephone",networkError:"Unstable connection. Please check network status",refresh:"Refresh",gender:"Gender",male:"Male",female:"Female",off_title:"write-off",detail_title:"Detail information",number:"Number",close:"Close",dataError:"Data sending error",no_data:"No data",setting:"Set up",create_batch:"New batch",reset_batch:"Reset batch",order_people:"Person"}},"zh-CN":{common:{take_num:"叫号取单",write_off:"核销号码",take:"取号",take_title:"取号号码",off:"报到",current_waiting:"等候组数",order_number:"号码",confirm_title:"等候确认",confirm:"确认",cancel:"取消",total:"人数",name:"称呼",phone:"电话",networkError:"网路不稳定？",refresh:"刷新",gender:"性别",male:"男性",female:"女性",off_title:"核销",detail_title:"详细资讯",number:"号码",close:"关闭",dataError:"资料送出错误",no_data:"暂无候位",setting:"设定",create_batch:"建新批次",reset_batch:"重设批次",order_people:"人数"}}};a.a.use(l.a);var d=new l.a({locale:"zh-TW",fallbackLocale:"zh-TW",messages:f}),h={install:function(t){var e={setLanguage:function(t){document.documentElement.setAttribute("lang",t),u.a.defaults.headers.common["Accept-Language"]=t,d.locale=t}};t.prototype.$i18nService=e}};a.a.use(h);var p=d,_=n("Xxa5"),v=n.n(_),g=n("exGp"),b=n.n(g),C=n("c/Tr"),w=n.n(C),$={name:"Tabs",methods:{onTabSelect:function(t){var e=null;e="A"===t.target.tagName?t.target.parentElement:t.target;var n=document.getElementsByClassName("main-tabs")[0].getElementsByTagName("li");w()(n).forEach(function(t){t.classList.remove("is-active")}),e.classList.add("is-active")}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"main-tabs"},[n("ul",[n("li",{class:{"is-active":"/"===t.$route.path},on:{click:function(e){return t.onTabSelect(e)}}},[n("router-link",{attrs:{to:"/"}},[t._v(t._s(t.$t("common.take_num")))])],1),t._v(" "),n("li",{class:{"is-active":"/setting"===t.$route.path},on:{click:function(e){return t.onTabSelect(e)}}},[n("router-link",{attrs:{to:"/setting"}},[t._v(t._s(t.$t("common.setting")))])],1)])])},staticRenderFns:[]};var y=n("VU/8")($,k,!1,function(t){n("TvZR")},"data-v-7417a1c8",null).exports,S={name:"Header",computed:{img:function(){return"url("+n("GydF")+")"}}},N={render:function(){var t=this.$createElement;return(this._self._c||t)("nav",{staticClass:"logo",style:{backgroundImage:this.img}})},staticRenderFns:[]};var M={name:"YAKINIKU",components:{Header:n("VU/8")(S,N,!1,function(t){n("xt7u")},"data-v-5ce1431e",null).exports,Tabs:y},methods:{init:function(){var t=this;return b()(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$loading.show();case 1:case"end":return e.stop()}},e,t)}))()}}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app",ontouchstart:""}},[e("Header"),this._v(" "),e("Tabs",{attrs:{id:"tabs"}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var x=n("VU/8")(M,A,!1,function(t){n("J7QH")},null,null).exports,T=n("/ocq"),E={name:"CurrentWaiting",props:{label:{type:String},num:{type:String,default:"0"}}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"waiting-groups",style:{height:t.label?"100%":"60%"}},[t.label?n("p",[t._v(t._s(t.label))]):t._e(),t._v(" "),n("h1",[t._v(t._s(t.num))])])},staticRenderFns:[]};var R=n("VU/8")(E,V,!1,function(t){n("fo8q")},"data-v-4024354d",null).exports,U={name:"ConfirmModal",props:{name:{type:String,required:!0},title:{type:String},btnComfirm:{type:String,default:p.t("common.confirm")},btnCancel:{type:String,default:p.t("common.close")},clickToClose:{type:Boolean,default:!1}},methods:{show:function(){this.$modal.show(this.name)},close:function(){this.$modal.hide(this.name),this.$emit("close")},confirm:function(){this.$emit("confirm")}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{staticClass:"confirm-modal",attrs:{height:"auto",name:t.name,clickToClose:t.clickToClose}},[t.title?n("div",{staticClass:"confirm-modal-header"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"confirm-modal-body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"confirm-modal-footer"},[t.btnComfirm?n("wpt-button",{staticClass:"confirm-modal-yes btn",on:{click:t.confirm}},[t._v("\n      "+t._s(t.btnComfirm)+"\n    ")]):t._e(),t._v(" "),n("wpt-button",{staticClass:"confirm-modal-no btn",style:{width:t.btnComfirm?"":"80%"},on:{click:t.close}},[t._v(t._s(t.btnCancel)+"\n    ")])],1)])},staticRenderFns:[]};var G=n("VU/8")(U,B,!1,function(t){n("sODS")},null,null).exports,F={name:"Table",props:{list:{type:Array}},data:function(){return{arriveName:"arriveModal",infoName:"detailModal",cancelName:"cancelModal",selectItem:{}}},components:{Modal:G},methods:{formatString:function(t){return t?t.toString().padStart(4,"0"):""},delItem:function(t){var e=this.list.findIndex(function(e){return e.code===t});this.list.splice(e,1)},arriveCheck:function(t){this.selectItem=t,this.$refs.arriveModal.show()},cancelCheck:function(t){this.selectItem=t,this.$refs.cancelModal.show()},arriveConfirm:function(t){this.init(t),this.$refs.arriveModal.close()},cancelConfirm:function(t){this.init(t),this.$refs.cancelModal.close()},openModal:function(t){this.selectItem=t,this.$refs.detailModal.show()},init:function(t){this.delItem(t),this.$emit("updateGroups",this.list.length)}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list?n("div",[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("common.order_number")))]),t._v(" "),n("th",{staticStyle:{width:"20%"}},[t._v(t._s(t.$t("common.order_people")))]),t._v(" "),n("th")])]),t._v(" "),n("tbody",[0===t.list.length?n("tr",[n("td",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("common.no_data")))])]):t._e(),t._v(" "),t._l(t.list,function(e,a){return n("tr",{key:a},[n("td",{on:{click:function(n){return t.openModal(e)}}},[t._v(t._s(t.formatString(e.count)))]),t._v(" "),n("td",{on:{click:function(n){return t.openModal(e)}}},[t._v(t._s(e.total))]),t._v(" "),n("td",{staticClass:"center"},[n("wpt-button",{staticClass:"yellow btn tableBtn",on:{click:function(n){return t.arriveCheck(e)}}},[t._v("\n            "+t._s(t.$t("common.off"))+"\n          ")]),t._v(" "),n("wpt-button",{staticClass:"gray btn tableBtn",on:{click:function(n){return t.cancelCheck(e)}}},[t._v("\n            "+t._s(t.$t("common.cancel"))+"\n          ")])],1)])})],2)]),t._v(" "),n("Modal",{ref:t.arriveName,attrs:{title:t.$t("common.off_title")+" "+t.formatString(t.selectItem.count),name:t.arriveName},on:{confirm:function(e){return t.arriveConfirm(t.selectItem.code)}}}),t._v(" "),n("Modal",{ref:t.cancelName,attrs:{title:t.$t("common.cancel")+" "+t.formatString(t.selectItem.count),name:t.cancelName},on:{confirm:function(e){return t.cancelConfirm(t.selectItem.code)}}}),t._v(" "),n("Modal",{ref:t.infoName,attrs:{title:t.$t("common.detail_title"),name:t.infoName,btnComfirm:""}},[t.selectItem?n("div",{staticClass:"modal-body"},[n("ul",[n("li",[n("p",[t._v(t._s(t.$t("common.number")))]),t._v(" "),n("span",[t._v(t._s(t.formatString(t.selectItem.count)))])]),t._v(" "),n("li",[n("p",[t._v(t._s(t.$t("common.total")))]),t._v(" "),n("span",[t._v(t._s(t.selectItem.total+"人"))])]),t._v(" "),n("li",[n("p",[t._v(t._s(t.$t("common.name")))]),t._v(" "),n("span",[t._v(t._s(t.selectItem.person))])]),t._v(" "),n("li",[n("p",[t._v(t._s(t.$t("common.phone")))]),t._v(" "),n("span",[t._v(t._s(t.selectItem.number))])])])]):t._e()])],1):t._e()},staticRenderFns:[]};var D=n("VU/8")(F,I,!1,function(t){n("j+qi")},"data-v-1ec1fd0a",null).exports,L={name:"Numselector",data:function(){return{num:1}},props:{label:{type:String,required:!0}},watch:{num:function(t){this.$emit("value",t)}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selector"},[n("span",[t._v(t._s(t.label))]),t._v(" "),n("wpt-quantity",{staticClass:"quantity",attrs:{min:1,max:99},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1)},staticRenderFns:[]};var W=n("VU/8")(L,O,!1,function(t){n("sa4x")},"data-v-c9d5ce8c",null).exports,P={name:"Input",props:{label:{type:String},type:{type:String},txtLimited:{type:Number}},methods:{inputTxt:function(){this.txtLimited&&(this.$refs.field.$el.querySelector("input").value=this.$refs.field.value.substr(0,this.txtLimited)),this.$emit("value",this.$refs.field.$el.querySelector("input").value)}}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input"},[e("span",[this._v(this._s(this.label))]),this._v(" "),e("wpt-input",{ref:"field",attrs:{genre:this.type},on:{input:this.inputTxt}})],1)},staticRenderFns:[]};var Q=n("VU/8")(P,q,!1,function(t){n("RDyM")},"data-v-315f9e6b",null).exports,H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gender-block"},[n("span",[t._v(t._s(t.$t("common.gender")))]),t._v(" "),n("div",{staticClass:"gender-selector"},[n("wpt-button",{staticClass:"gender-selector-male",class:t.detectStyle(t.male),on:{click:function(e){return t.update(t.male)}}},[n("i",{staticClass:"yif yif-male"}),t._v("\n      "+t._s(t.$t("common.male"))+"\n    ")]),t._v(" "),n("wpt-button",{staticClass:"gender-selector-female",class:t.detectStyle(t.female),on:{click:function(e){return t.update(t.female)}}},[n("i",{staticClass:"yif yif-female"}),t._v("\n      "+t._s(t.$t("common.female"))+"\n    ")])],1)])},staticRenderFns:[]};var j=n("VU/8")({name:"GenderSeletor",data:function(){return{female:2,male:1,value:1}},methods:{detectStyle:function(t){var e=[];return t===this.value&&e.push("active"),e},update:function(t){this.value=t,this.$emit("genderVal",t)}}},H,!1,function(t){n("VV3j")},null,null).exports,K=n("//Fk"),z=n.n(K),X=n("M4fF"),Y=n.n(X),Z={name:"NetworkModal",data:function(){return{name:"NetworkModal",title:"",btnComfirm:p.t("common.refresh")}},methods:{show:function(t){this.title=t,this.$modal.show(this.name)},close:function(){this.$modal.hide(this.name)},onConfirm:function(){location.reload()}},components:{ConfirmModal:G}},J={render:function(){var t=this.$createElement;return(this._self._c||t)("ConfirmModal",{staticClass:"network-modal",attrs:{title:this.title,name:this.name,btnComfirm:this.btnComfirm},on:{confirm:this.onConfirm}})},staticRenderFns:[]};var tt=n("VU/8")(Z,J,!1,function(t){n("fU4p")},null,null).exports;a.a.use(r.a),a.a.use(c.a,{dynamic:!0});var et=new a.a(tt),nt=et.$mount();document.body.appendChild(nt.$el);var at=et,ot=u.a.create({timeout:3e4,validateStatus:function(t){return 200===t}});ot.interceptors.request.use(function(t){var e={headers:{APP:"WAITPLUS"}};return Y.a.merge(t,e)},function(t){return z.a.reject(t)}),ot.interceptors.response.use(function(t){return 0!==t.data.err&&at.show(p.t("common.dataError")),t},function(t){return u.a.isCancel(t)?z.a.resolve():("ECONNABORTED"===t.code&&at.show(p.t("common.networkError")),z.a.reject(t))});var it=ot,rt=`http://${location.hostname}:9999`,st=function(){return it.request({method:"get",url:rt+"/api/waits"})},ct=function(){return it.request({method:"get",url:rt+"/api/waitings"})},lt={name:"TakeNum",data:function(){return{waitingList:[],waitName:"waitingModal",nameVal:"先生",name:"",phone:"",total:1,takeNum:0,waitingGroups:0}},components:{CurrentWaiting:R,Table:D,Modal:G,Numselector:W,Input:Q,GenderSeletor:j},methods:{formatString:function(t){return t.toString().padStart(4,"0")},takeOrder:function(){this.$refs.waitingModal.show()},onConfirm:function(){this.takeNum=this.takeNum+1,this.waitingList.push({count:this.takeNum,total:this.total,person:this.name,number:this.phone}),this.waitingGroups+=1,this.$refs.waitingModal.close(),this.nameVal="先生"},genderVal:function(t){this.nameVal=2===t?"小姐":"先生"},closeModal:function(){this.nameVal="先生"},getName:function(t){this.name=t},getPhone:function(t){this.phone=t},getTotal:function(t){this.total=t},init:function(){var t=this;ct().then(function(e){t.waitingList=e.data.msg.waits||[],t.waitingGroups=e.data.msg.waits.length})},getAllWaitings:function(){var t=this;st().then(function(e){t.takeNum=e.data.msg.waits.length+1})},updateGroups:function(t){this.waitingGroups=t}},created:function(){}},mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"top"},[n("CurrentWaiting",{attrs:{label:t.$t("common.current_waiting"),num:t.waitingGroups.toString()}}),t._v(" "),n("CurrentWaiting",{attrs:{label:t.$t("common.take_title"),num:t.formatString(t.takeNum)}}),t._v(" "),n("wpt-button",{staticClass:"redBtn btn",on:{click:t.takeOrder}},[t._v(t._s(t.$t("common.take")))])],1),t._v(" "),n("Table",{attrs:{list:t.waitingList},on:{updateGroups:t.updateGroups}}),t._v(" "),n("Modal",{ref:t.waitName,attrs:{title:t.$t("common.confirm_title"),name:t.waitName},on:{confirm:t.onConfirm,close:t.closeModal}},[n("div",{staticClass:"modal-body"},[n("Numselector",{staticClass:"gap",attrs:{label:t.$t("common.total")},on:{value:t.getTotal}}),t._v(" "),n("GenderSeletor",{staticClass:"gap",on:{genderVal:t.genderVal}}),t._v(" "),n("Input",{staticClass:"gap",attrs:{label:t.$t("common.name"),txtLimited:32},on:{value:t.getName}}),t._v(" "),n("span",{staticClass:"label"},[t._v(t._s(t.nameVal))]),t._v(" "),n("Input",{attrs:{label:t.$t("common.phone"),type:"number",txtLimited:10},on:{value:t.getPhone}})],1)])],1)},staticRenderFns:[]};var ut=n("VU/8")(lt,mt,!1,function(t){n("xfOV")},"data-v-539cb9ec",null).exports,ft={name:"Setting",data:function(){return{title:"",name:"settingModal",path:""}},components:{Modal:G},methods:{create:function(){this.title=p.t("common.create_batch")+p.t("common.confirm"),this.path="create",this.$refs.settingModal.show()},reset:function(){this.title=p.t("common.reset_batch")+p.t("common.confirm"),this.path="reset",this.$refs.settingModal.show()},onConfirm:function(){this.$refs.settingModal.close(),this.path},closeModal:function(){}}},dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("wpt-button",{staticClass:"redBtn btn",on:{click:t.create}},[t._v(t._s(t.$t("common.create_batch")))]),t._v(" "),n("wpt-button",{staticClass:"grayBtn btn",on:{click:t.reset}},[t._v(t._s(t.$t("common.reset_batch")))]),t._v(" "),n("Modal",{ref:t.name,attrs:{title:t.title,name:t.name},on:{confirm:t.onConfirm,close:t.closeModal}})],1)},staticRenderFns:[]};var ht=n("VU/8")(ft,dt,!1,function(t){n("O8gP")},"data-v-6edee165",null).exports;a.a.use(T.a);var pt=new T.a({mode:"hash",routes:[{path:"/",name:"TakeNum",component:ut},{path:"/setting",name:"Setting",component:ht}]});a.a.config.silent=!0,a.a.config.productionTip=!1,a.a.config.devtools=!1,a.a.use(o.a),a.a.use(r.a),a.a.use(c.a,{dynamic:!0}),document.oncontextmenu=function(){return!1},new a.a({el:"#app",i18n:p,router:pt,store:new o.a.Store({modules:{}}),components:{App:x},template:"<App/>"})},O8gP:function(t,e){},RDyM:function(t,e){},TvZR:function(t,e){},VV3j:function(t,e){},fU4p:function(t,e){},fo8q:function(t,e){},"j+qi":function(t,e){},sODS:function(t,e){},sa4x:function(t,e){},xfOV:function(t,e){},xt7u:function(t,e){}},["NHnr"]);